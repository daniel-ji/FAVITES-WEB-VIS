<!DOCTYPE html>
<html>

<head>
    <link rel="icon" href="favicon.ico" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.4/font/bootstrap-icons.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
        crossorigin="anonymous"></script>
    <title>Pairwise Distance Graph Visualization</title>
</head>

<body>
    <div id="graph-container">
        <div class="graph-element d-none" id="graph-element-0">
            <h1 class="graph-title">Cluster Node-Link Graph</h1>
            <img src="images/zoom-to-fit.png" id="zoom-to-fit" title="Zoom to Fit" />
            <canvas id="pairwise-graph"></canvas>
        </div>
        <div class="graph-element d-none" id="graph-element-1">
            <h1 class="graph-title">Cluster Size Graph</h1>
            <div id="cluster-histogram"></div>
        </div>
        <div class="graph-element d-none" id="graph-element-2">
            <h1 class="graph-title">Cluster Size Distribution</h1>
            <div id="cluster-histogram"></div>
        </div>
        <div class="graph-element d-none" id="graph-element-3">
            <h1 class="graph-title">Cluster Summary Statistics</h1>
            <table class="table table-bordered" id="summary-table">
                <tbody>
                    <tr>
                        <td>Node Count:</td>
                        <td id="summary-node-count"></td>
                    </tr>
                    <tr>
                        <td>Singletons:</td>
                        <td id="summary-singleton-count"></td>
                    </tr>
                    <tr>
                        <td>Edge Count:</td>
                        <td id="summary-edge-count"></td>
                    </tr>
                    <tr>
                        <td>Assortativity:</td>
                        <td id="summary-assortativity"></td>
                    </tr>
                    <tr>
                        <td>Transitivity:</td>
                        <td id="summary-transitivity"></td>
                    </tr>
                    <tr>
                        <td>Triangle Count:</td>
                        <td id="summary-triangle-count"></td>
                    </tr>
                    <tr>
                        <td>Cluster Count:</td>
                        <td id="summary-cluster-count"></td>
                    </tr>
                    <tr>
                        <td>Mean Cluster Size</td>
                        <td id="summary-cluster-mean"></td>
                    </tr>
                    <tr>
                        <td>Median Cluster Size:</td>
                        <td id="summary-cluster-median"></td>
                    </tr>
                </tbody>
            </table>
        </div>
        <img src="images/arrow-left.svg" id="graph-arrow-left" title="Previous Visualization" />
        <img src="images/arrow-right.svg" id="graph-arrow-right" title="Next Visualization" />
        <h5 id="footer-label"></h5>
    </div>

    <div id="input-form">
        <h1 class="mt-4 mb-5">Pairwise Distance Graph Visualization</h1>

        <div id="input-form-content">
            <div id="input-step-1" class="input-step">
                <h3 class="w-100 text-center mb-5">Step 1: Provide Data</h3>

                <label for="upload-pairwise-file" class="form-label w-100 text-center">Upload pairwise distances
                    file: <i class="bi bi-asterisk text-danger"></i></label>
                <input type="file" class="form-control" id="upload-pairwise-file" />

                <label for="upload-data-file" class="form-label w-100 text-center mt-3">Upload supplementary data
                    file:</label>
                <input type="file" class="form-control" id="upload-data-file" />

                <button id="read-file" class="btn btn-primary mt-3">Submit</button>
                <p class="mt-3 text-success text-center d-none" id="upload-success">Done!</p>

                <p class="mt-3"><i class="bi bi-asterisk text-danger"></i> Required</p>
            </div>

            <div id="input-step-2" class="input-step d-none">
                <h3 class="w-100 text-center mb-5">Step 2: Set Threshold and Filter Clusters</h3>

                <div id="pairwise-threshold" class="mb-3">
                    <label for="threshold-select" id="threshold-label" class="form-label w-100 text-center">Pairwise
                        Distance Threshold
                        Level:</label>
                    <div class="input-group">
                        <input type="number" class="form-control" id="threshold-select"
                            aria-describedby="threshold-range-hint" min="0" max="0.05" step="0.0025" value="0.015">
                    </div>
                    <div class="form-text" id="threshold-range-hint">Threshold Range: 0 to 0.05 </div>
                </div>

                <div id="cluster-filter" class="mb-3">
                    <label for="cluster-filter-select" class="form-label w-100 text-center">Cluster Filter:</label>
                    <select class="form-select" id="cluster-filter-select">
                        <option selected value="all">Show All Clusters</option>
                        <option value="clusterNodeMin">Clusters with at least X nodes: </option>
                        <option value="maxClusterCount">Show largest X clusters: </option>
                    </select>

                    <input type="number" class="form-control mt-3 d-none" id="cluster-filter-value"
                        aria-describedby="cluster-filter-value-hint" min="0" step="1" placeholder="X value:">
                </div>

                <button id="filter-update" class="btn btn-primary mt-3">Update</button>
                <p class="mt-3 text-success text-center d-none" id="filter-update-status">Updating...</p>
            </div>

            <div id="input-step-3" class="input-step d-none">
                <h3 class="w-100 text-center mb-5">Step 3: Create Node Views</h3>

                <div id="views-container">
                    <!-- Dynamically generated on node data load in index.js-->
                </div>
                <div id="select-view-color" class="w-100 mt-4">
                    <label for="view-color">Select View Color:</label>
                    <input type="color" class="form-control form-control-color ms-3 border-secondary" id="view-color" value="#198754"
                        title="Choose your color">
                </div>
                <div id="create-view">
                    <button class="btn btn-primary mt-3 w-100" id="create-view-button">Create View</button>
                </div>

                <h5 class="w-100 mt-5 mb-3 text-center">Created Node Views:</h5>
                <div id="view-entry-container" class="mb-5">
                    <!-- Dynamically generated on node data load in index.js-->
                </div>
            </div>
        </div>

        <div id="step-action" class="my-4">
            <button id="step-back" class="btn btn-primary">Back</button>
            <button id="step-next" class="btn btn-primary">Next</button>
        </div>
    </div>

    <script type="module" src="index.js"></script>
</body>

</html>